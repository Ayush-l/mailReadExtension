# mailReadExtension

#Intution

We used a button and appended at the end of body of Mail. When the receiver will press the button it will hit URL generated by server.js ans we can use this as the indicator for whether the mail is read or not.



#Alternative

We could have used an invisible pixel at the end of body to check whether the mail is opened or not. But this comes up with 2 problems 

1. The image is opened in sender's end too when the sender is sending the mail moreover it will be opened everytime when the sender will open their mail.

2. Gmail downloads the pixel from sender's end and does not hit the url from receiver's end.



#BackEnd

    We wrote backend in Spring Boot(Java based BackEnd frameword).

    Created a class called mail to register all the mails send by user.

    We used MongoDB atlas for a remote database.

    #Services

        Package containing all the service classes made.

        #MailService.java

            It contains 3 functions.

                a. isVisited()-> It returns -1 if the record is not present in database, return 1 if receiver has receiver has seen the mail and return 0 if receiver hasn't seen the mail.

                b. visit()-> It changes the status of the mail id to visited using the boolean variable named visit.

                c. createMail()-> It create a new Mail in database with visit=false and id's value taken as parameter.



    #Controllers

        Package containing all the api-endpoints

        #MailController.java

            It contains 3 api endpoints.

                a. /mail/create/{id}-> it is the api endpoint for creating a new mail class with parameter id.

                b. /mail/visit/{id}-> it is the api endpoint for marking the mail classObjects as visited.

                c. /mail/isvisited/{id}-> it is the api endpoint for checking whether the mail has been seen or not.



#FrontEnd

    #Server.js

        It is a javaScript file that Hosts an transparent pixel. Whenever this endpoint hits it calls backend server to mark that mail id to visited. Sender must not open this link otherwise the extension will show read(false information).

    #content_script.js

        It is the main file behind the functioning of extension it appends the button at the end of mail body when we send the mail and it also checks whether the mail is read or not whenever we open a mail.

        It also assigns a unique id for every mail in form of Sender'smail+Date.now() as a sender will be sending atmax 1 mail at a time this will always be unique.

        It also assigns a unique url to that button using email of sender and Date and time.



Note: If you want to test this code on your machine using localhost it won't work because you can't call a api with http protocol from a website following https protocol you may need to use ngrok.